<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Han Zheng | Portfolio</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css" />
    <style>
      .project-details-container {
        display: flex;
        justify-content: center;
        align-items: flex-start;
        max-width: 1000px;
        margin: 20px auto;
        gap: 40px;
      }

      .project-details-container.reverse {
        flex-direction: row-reverse;
      }

      .project-details-image {
        flex: 0 0 40%; /* Increased from 30% to give more width */
        /* height: 250px; /* Slightly reduced height, adjust as needed */
        display: flex;
        justify-content: center;
        align-items: center;
        background-color: white; /* Set background to white */
      }

      .project-details-image img {
        max-width: 100%;
        /* Set a max-height to respect the container's height */
        max-height: 100%;
        height: auto;
        width: auto;
        /* Use 'contain' to ensure the whole image is visible without being cropped */
        object-fit: contain;
        display: block;
      }

      .project-details-text {
        flex: 0 0 55%;
        text-align: left;
      }

      .lightbox-content h3 {
        text-align: center;
      }

      /* Style for centered video in Stirling Engine project */
      .project-video {
        display: block;
        max-width: 70%;
        height: auto;
        margin: 20px auto;
      }

      .video-caption {
        text-align: center;
        margin-top: 5px;
        font-size: 1rem;
      }

      /* Font size increase for project descriptions */
      .lightbox-content p,
      .lightbox-content ul {
        font-size: 1.125rem; /* Increased from default ~16px to 18px */
      }

      @media (max-width: 768px) {
        .project-details-container,
        .project-details-container.reverse {
          flex-direction: column;
          align-items: center;
        }

        .project-details-image {
          flex: 0 0 auto;
          margin-bottom: 20px;
        }

        .project-details-text {
          flex: 0 0 auto;
          text-align: center;
        }

        .project-video {
          max-width: 100%;
        }

        /* Adjust font size for mobile */
        .lightbox-content p,
        .lightbox-content ul {
          font-size: 1rem; /* ~16px for mobile */
        }
      }
    </style>
  </head>
  <body>
    <!-- Hero Header -->
    <header class="hero" data-aos="fade-in">
      <div class="nav-container">
        <nav id="nav-links">
          <a href="#about">About</a>
          <a href="#resume">Resume</a>
          <a href="#projects">Projects</a>
          <a href="#contact">Contact</a>
        </nav>
        <button id="hamburger">☰</button>
      </div>
      <div class="hero-content">
        <h1>Han Zheng</h1>
        <p class="subtitle">Mechanical Engineering Portfolio</p>
      </div>
    </header>

    <!-- About Me Section -->
    <section id="about" data-aos="fade-up">
      <h2>About Me</h2>
      <div class="about-container">
        <div class="about-image">
          <img
            src="images/profile.JPG"
            alt="Han Zheng portrait"
            class="profile-img"
          />
        </div>
        <div class="about-text">
          <p>
            Hi! I’m Han, a junior studying Mechanical Engineering with a focus
            on Aerospace. My name is spelled just like Han Solo from
            <em>Star Wars</em> and Han from <em>Fast & Furious</em>—though I
            haven’t piloted a spaceship or drifted through Tokyo (yet). I
            started out building things with hot glue and cardboard, and now I
            use advanced engineering tools to take on real-world challenges. I’m
            driven by the belief that even small innovations can lead to
            meaningful change. Feel free to explore my projects and experiences!
          </p>
        </div>
      </div>
    </section>

    <!-- Resume Section -->
    <section id="resume" data-aos="fade-up">
      <h2>Resume</h2>
      <p>
        <a href="HanZheng_Resume.pdf" target="_blank"
          >Download My Resume (PDF)</a
        >
      </p>
    </section>

    <!-- Projects Section -->
    <section id="projects" data-aos="fade-up">
      <h2>Projects</h2>
      <div class="project-grid">
        <!-- Project 1: AEC -->
        <div class="project-card" onclick="openProjectLightbox('aec')">
          <img src="images/aec/aec_profile.jpg" alt="aec" class="project-img" />
          <span class="project-title"
            >Albany Engineered Composites Internship</span
          >
        </div>
        <!-- Project 2: Design Build Fly -->
        <div class="project-card" onclick="openProjectLightbox('dbf')">
          <img
            src="images/dbf/plane_title.JPG"
            alt="DBF RC plane during manufacturing"
            class="project-img"
          />
          <span class="project-title">Design Build Fly</span>
        </div>
        <!-- Project 3: VfOx Accommodation, DAVINCI Mission -->
        <div class="project-card" onclick="openProjectLightbox('vfox')">
          <img
            src="images/vfox/Vfox1.jpg"
            alt="3D airflow simulation around VFOX descent sphere"
            class="project-img"
          />
          <span class="project-title">VFOX Accommodation, DAVINCI Mission</span>
        </div>
        <!-- Project 4: Acrylic Crane -->
        <div class="project-card" onclick="openProjectLightbox('crane')">
          <img
            src="images/crane/crane_part.jpg"
            alt="Acrylic crane on mounting plate"
            class="project-img"
          />
          <span class="project-title">Acrylic Crane</span>
        </div>
        <!-- Project 5: Stirling Engine -->
        <div class="project-card" onclick="openProjectLightbox('stirling')">
          <img
            src="images/engine/engine.jpg"
            alt="Stirling engine assembly"
            class="project-img"
          />
          <span class="project-title">Stirling Engine</span>
        </div>
        <!-- Project 6: Arcade Machine -->
        <div class="project-card" onclick="openProjectLightbox('camel')">
          <img
            src="images/arcade/camel.jpg"
            alt="Camel Jumper arcade machine"
            class="project-img"
          />
          <span class="project-title">Arcade Machine (Camel Jumper)</span>
        </div>
      </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" data-aos="fade-up">
      <h2>Contact</h2>
      <p>Email: hzheng34@jh.edu</p>
      <p>
        LinkedIn:
        <a
          href="https://www.linkedin.com/in/han-zheng-91b502257"
          target="_blank"
          >Han Zheng</a
        >
      </p>
    </section>

    <!-- Back to Top Button -->
    <button id="backToTop">↑</button>

    <!-- Lightbox Modal -->
    <div id="lightbox" class="lightbox">
      <div class="lightbox-nav">
        <button id="lightbox-hamburger">☰</button>
        <nav id="lightbox-nav-links">
          <a href="#about" onclick="navigateFromLightbox('about')">About</a>
          <a href="#resume" onclick="navigateFromLightbox('resume')">Resume</a>
          <a href="#projects" onclick="navigateFromLightbox('projects')"
            >Projects</a
          >
          <a href="#contact" onclick="navigateFromLightbox('contact')"
            >Contact</a
          >
        </nav>
      </div>
      <span class="close" onclick="closeLightbox()">×</span>
      <div class="lightbox-content" id="project-lightbox-content"></div>
      <div id="caption"></div>
    </div>

    <footer>
      <p>© 2025 Han Zheng</p>
    </footer>

    <!-- Scripts -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
      AOS.init();

      // Main Navigation Hamburger Menu Toggle
      const hamburger = document.getElementById("hamburger");
      const navLinks = document.getElementById("nav-links");

      hamburger.addEventListener("click", () => {
        navLinks.classList.toggle("active");
      });

      // Lightbox Navigation Hamburger Menu Toggle
      const lightboxHamburger = document.getElementById("lightbox-hamburger");
      const lightboxNavLinks = document.getElementById("lightbox-nav-links");

      lightboxHamburger.addEventListener("click", () => {
        lightboxNavLinks.classList.toggle("active");
      });

      // Back to Top Button
      const backToTop = document.getElementById("backToTop");

      window.addEventListener("scroll", () => {
        if (window.scrollY > 300) {
          backToTop.style.display = "block";
        } else {
          backToTop.style.display = "none";
        }
      });

      backToTop.addEventListener("click", () => {
        window.scrollTo({ top: 0, behavior: "smooth" });
      });

      // Project Data
      const projects = {
        aec: {
          title: "Albany Engineered Composites Internship",
          image: "images/aec/aec_profile.jpg",
          details: `
          <div class="project-details-container">
            <div class="project-details-image">
              <img src="images/aec/verve.jpg" alt="VERVE">
            </div>
            <div class="project-details-text">
              <p> <u>Crimp vs Elastic Properties: </u>During my internship as a Mechanical Engineering R&T Intern at Albany Engineered Composites, I studied how fiber crimp—essentially 
                the waviness of fibers—affects the elastic properties of 3D woven composites. Using a virtual model reconstructed from µCT scans, I 
                processed and compacted the geometry in LS-DYNA, and then selected a representative unit cell to mesh and assign material properties. 
                I conducted Abaqus simulations to determine the elastic modulus, shear modulus, and Poisson’s ratios in the warp, weft, and 
                through-thickness directions. A total of 24 cases were analyzed, with 12 using polymer matrix composites (PMC) and 12 using ceramic 
                composites (CC). The image on the left illustrates the meshed model.
              </p>
            </div>
          </div>

          <hr style="display: block; height: 10px; background: limegreen; width: 80%; margin: 50px auto;">

          <div class="project-details-container reverse">
            <div class="project-details-image">
              <img src="images/aec/fixture.jpg" alt="fixture">
            </div>
            <div class="project-details-text">
              <p> <u>Fixture Design: </u>Another project I undertook was designing a fixture to secure woven preforms during µCT scanning. The preforms had a fixed cross section of 
                3.5" × 4" but varied in thickness up to 2". I designed the fixture to meet key constraints, including centering the preform in all three directions, 
                accommodating thickness adjustments, and using a material compatible with µCT scanning and lower in density than carbon fiber. The final fixture was 
                3D-printed in ABS. The isometric view of the fixture is shown on the right, and video illustrations are provided at the end of the page for further clarification. </p>
            </div>
          </div>

          <hr style="display: block; height: 10px; background: limegreen; width: 80%; margin: 50px auto;">

          <div class="project-details-container">
            <div class="project-details-image">
              <img src="images/aec/fea_stress_strain.jpg" alt="FEA Project">
            </div>
            <div class="project-details-text">
              <p> <u> Compaction FEA: </u>Towards the end of my internship, I worked on addressing an issue with preform compaction. The preform would spring back after the compaction process, 
                making it difficult to study its geometry in the compacted state. One solution was to scan the preform while it remained inside the compaction fixture. 
                To ensure high-quality µCT scans, the fixture material needs to have a lower density than carbon fiber while maintaining sufficient stiffness. I 
                used experimental data from prior tests to obtain elastic modulus values at selected strain levels and wrote a subroutine to model the nonlinear 
                hyperelastic behavior of the preform. I chose maple wood as the fixture material for its low density, adequate stiffness, and ease of prototyping. </p>
        
            </div>
          </div>

          <hr style="display: block; height: 10px; background: limegreen; width: 80%; margin: 50px auto;">

          <div class="project-details-container reverse">
            <div class="project-details-image">
              <img src="images/aec/tow.jpg" alt="Tow Friction">
            </div>
            <div class="project-details-text">
              <p> <u>Friction Tests: </u>I spent a significant portion of my internship conducting experiments to study tow friction within woven preforms. Lower tow friction is known to 
                improve bulk reduction and reduce the occurrence of fiber buckling during the forming process. For this project, I examined tow friction in preforms 
                with varying architectures under different conditions: dry, wet, and elevated temperature (50-100 °C). The experimental setup is shown in the illustration 
                on the right: the tow was clamped by an aluminum connector (shown in orange), which was attached to a rope that routed over a roller pulley. Weight was gradually 
                added to the bucket until the tow pulled out of the preform, and the corresponding weight was recorded as the measure of tow friction.  </p>
            </div>
          </div>
          
          <hr style="display: block; height: 10px; background: limegreen; width: 80%; margin: 50px auto;">

          <video class="project-video" controls>
            <source src="images/aec/fixture_collapse.mp4" type="video/mp4">
            Your browser does not support the video tag.
          </video>
            <p class="video-caption">Collapsing the exploded view of the fixture; the grey panel in the middle is the preform</p>
    
          <video class="project-video" controls>
            <source src="images/aec/thickness_adjust.mp4" type="video/mp4">
            Your browser does not support the video tag.
          </video>s
            <p class="video-caption">Thickness adjustment to secure the preform</p>
          
          <video class="project-video" controls>
            <source src="images/aec/fea_vid.mp4" type="video/mp4">
            Your browser does not support the video tag.
          </video>
            <p class="video-caption">Animated compaction process</p>
  

        `,
        },
        dbf: {
          title: "Design Build Fly (DBF)",
          image: "images/dbf/plane_title.JPG",
          details: `
          <h2 style="text-align: center; font-size: 1.8rem; margin-bottom: 30px;">2026 Competition</h2>

          <div class="project-details-container">
            <div class="project-details-image">
              <img src="images/dbf/fuselage.jpg" alt="2026 DBF Plane">
            </div>
            <div class="project-details-text">
              <p> <u>Overview: </u> For this year’s competition, I am serving as the team’s Chief Engineer, leading the fuselage design and overseeing the manufacturing processes. 
                In this role, I directly manage a six-member subteam and support about fifteen team members overall. My primary goal is to develop a lightweight aircraft utilizing 
                carbon fiber wet layups to maximize payload capacity, which is a key mission objective this year. The image on the left shows the current design in progress. </p>
            </div>
          </div>

          <hr style="display: block; height: 10px; background: limegreen; width: 80%; margin: 50px auto;">

          <div class="project-details-container reverse">
            <div class="project-details-image">
              <img src="images/dbf/scaledown.jpg" alt="A key component from the 2026 project">
            </div>
            <div class="project-details-text">
              <p><u>Fuselage Manufacturing: </u>On the right is a scaled-down fuselage model in two halves built to validate the manufacturing process and test structural integrity. I 3D-printed two PLA female mold halves and applied wax and PVA as mold release
                agents on them. I then performed a three-layer layup of bidirectional 
                carbon fiber cloth in a 0/90°, ±45°, 0/90° orientation. I am polishing the edges and preparing to join the two halves to form a complete fuselage shell. </p>
            </div>
          </div>

          <hr style="display: block; height: 10px; background: limegreen; width: 80%; margin: 50px auto;">

          <div class="project-details-container">
            <div class="project-details-image">
              <img src="images/dbf/wing_fea.jpg" alt="wing fea">
            </div>
            <div class="project-details-text">
              <p> <u>Composite FEA: </u> To validate the wing's structural design, I performed a Finite Element Analysis (FEA) in Abaqus. The model simulated an assembly of an XPS foam core insert, an internal carbon fiber spar, and a skin made 
                from wet layup of two layers of ±45° bidirectional carbon fiber. A distributed lift force (scaled to simulate a 6G maneuver) calculated from aerodynamic parameters, was applied to the cantilevered wing structure. The results confirmed 
                the design's integrity, showing minimal deflection and stress levels safely below material failure points. </p>
            </div>
          </div>

          <hr style="display: block; height: 2px; background: #cccccc; width: 90%; margin: 70px auto; border: none;">


          <h2 style="text-align: center; font-size: 1.8rem; margin-top: 50px; margin-bottom: 30px;">2025 Competition</h2>

          <div class="project-details-container">
            <div class="project-details-image">
              <img src="images/dbf/plane.jpg" alt="DBF RC plane overview">
            </div>
            <div class="project-details-text">
              <p> <u>Overview: </u> For the 2024–2025 season, I served as the Lead Mechanical Engineer for our competition team.
                The image on the left shows the aircraft we designed and built for this year’s competition. With limited professional mentorship, 
                funding, and team members, I took on tasks ranging from calculating the minimum dimensions of the carbon fiber 
                spar to performing manual composite layups for control surfaces.
              </p>
            </div>
          </div>

          <hr style="display: block; height: 10px; background: limegreen; width: 80%; margin: 50px auto;">

          <div class="project-details-container reverse">
            <div class="project-details-image">
              <img src="images/dbf/layup.jpg" alt="CAD model of DBF tail assembly">
            </div>
            <div class="project-details-text">
              <p> <u>Empennage Design and Manufacturing: </u>I assisted with the design of the empennage assembly using Onshape. The tail features a rotatable tail gear linked to rudder movement and 
                a tail box that enables quick attachment of the horizontal and vertical stabilizers. To reduce weight while maintaining 
                structural strength, I performed a wet layup of carbon fiber on all control surfaces (rudder, elevator, and 
                ailerons), which were initially shaped from hot-wire cut foam cores. I used a Dremel to clean up edges of the control surfaces 
                to improve aerodynamics and aesthetics. </p>
              
            </div>
          </div>

          <hr style="display: block; height: 10px; background: limegreen; width: 80%; margin: 50px auto;">

          <div class="project-details-container">
            <div class="project-details-image">
              <img src="images/dbf/pylon.jpg" alt="DBF pylon structure">
            </div>
            <div class="project-details-text">
              <p> <u>Pylon Design: </u>I designed the pylon as an attachment structure to support an external, weight-carrying tank used as the payload. 
                The pylon itself can be attached to the wing spar through a slotted hole interface, allowing for quick installation and removal.
                The payload can be secured to the pylon using zip ties. </p>
        
            </div>
          </div>

          <hr style="display: block; height: 10px; background: limegreen; width: 80%; margin: 50px auto;">

          <div class="project-details-container reverse">
            <div class="project-details-image">
              <img src="images/dbf/servo_part.jpg" alt="Servo motor component for DBF plane">
            </div>
            <div class="project-details-text">
              <p> <u>Servo Platform: </u>I customized servo motor platforms to mount the servos controlling the rudder, elevator, and ailerons. Each servo is
                secured using multiple metal L-brackets, which I fabricated through shearing, bending, and punching. The L-brackets 
                are bolted directly onto the plywood platforms. </p>
            </div>
          </div>

          <hr style="display: block; height: 10px; background: limegreen; width: 80%; margin: 50px auto;">

          <div class="project-details-container">
            <div class="project-details-image">
              <img src="images/dbf/cfd.jpg" alt="DBF pylon structure">
            </div>
            <div class="project-details-text">
              <p> <u>Aerodynamic Modeling: </u>To explore ways of reducing aerodynamic drag, I conducted a computational fluid dynamics (CFD) simulation of a custom 
                housing for the weight-carrying tank at an airspeed of 20 m/s using SimScale. Although the housing was not 
                implemented in the final design, analyzing surface pressure distributions and surrounding velocity fields informed general flow
                behavior and affected my design decisions.  </p>
        
            </div>
          </div>
      `,
        },
        vfox: {
          title: "VfOx Accommodation, DAVINCI Mission",
          image: "images/vfox/Vfox1.jpg",
          details: `
          <div class="project-details-container">
            <div class="project-details-image">
              <img src="images/vfox/Vfox1.jpg" alt="3D airflow simulation around VFOX descent sphere">
            </div>
            <div class="project-details-text">
              <p> As a student collaborator in the VfOx (Venus Oxygen Fugacity sensor) team, a part of the DAVINCI (Deep Atmosphere Venus 
                Investigation of Noble gases, Chemistry, and Imaging) Mission, I was tasked with assessing the proposed VfOx accommodations on 
                the descent sphere. </p>
              
            </div>
          </div>

          <hr style="display: block; height: 10px; background: limegreen; width: 80%; margin: 50px auto;">

          <div class="project-details-container reverse">
            <div class="project-details-image">
              <img src="images/vfox/velocity_distribution.jpg" alt="Velocity distribution around VFOX descent sphere">
            </div>
            <div class="project-details-text">
              <p>
                I simulated airflow around the descent sphere at a descent speed of 20 m/s using COMSOL Multiphysics, identifying regions of 
                flow separation and stagnant airflow. Based on these findings, I developed a proposal for 
                VfOx sensor accommodation. To guide decision-making, I created a 5×5 risk matrix to evaluate 
                each accommodation option. I then presented my proposal to staff scientists from Johns Hopkins Applied Physics Laboratory (APL)
                 and Goddard Space Flight Center (GSFC). </p>

            </div>
          </div>
        `,
        },
        crane: {
          title: "Acrylic Crane",
          image: "images/crane/crane_part.jpg",
          details: `
          <div class="project-details-container">
            <div class="project-details-image">
              <img src="images/crane/crane_top.jpg" alt="Top view of acrylic crane">
            </div>
            <div class="project-details-text">
              <p>In this project, we are required to design and construct a crane that is capable of lifting a 10lb weight up by one inch under 
                one minute. The crane should not have a maximum deflection of more than 0.5”. We are given a 6V gearmotor with a stall torque of 
                12 oz-in and a 7.75” x 7.75” x ¼” acrylic plate, and we are allowed to purchase $25 worth of materials. </p>
              
            </div>
          </div>

          <hr style="display: block; height: 10px; background: limegreen; width: 80%; margin: 50px auto;">

          <div class="project-details-container reverse">
            <div class="project-details-image">
              <img src="images/crane/crane_cad.jpg" alt="CAD model of acrylic crane">
            </div>
            <div class="project-details-text">
              <p>I conducted comprehensive analyses on the stress state of the beam, including bending stress, shear stress, and deflection to determine 
                the optima cross-section dimensions and material (2” × 0.25” acrylic bars). After performing gear train calculations, I decided an optimal 
                gear ratio of 8 for a four-gear system and the optimal gear diameters to satisfy the constraints and requirements. I designed the booms 
                and the gear trains on Solidworks. Eventually, our crane successfully lifted the 10 lb weight by one inch in just 14 seconds, well within the required time limit of one minute. 
                The measured beam deflection was 0.24 inches, which aligns with our designed safety factor of 2.</p>
            </div>
          </div>
        `,
        },
        stirling: {
          title: "Stirling Engine",
          image: "images/engine/engine.jpg",
          details: `
          <div class="project-details-container">
            <div class="project-details-image">
              <img src="images/engine/engine.jpg" alt="Stirling engine assembly">
            </div>
            <div class="project-details-text">
              <p>For my manufacturing lab course, I was given CAD drawings of individual Stirling engine components with GD&T. I followed detailed 
                process sheets provided for some parts and developed my own for others, specifying machining steps such as end mill diameter 
                selection, chamfering requirements, and appropriate spindle speeds on the lathe. Using the lathe, mill, and other machine tools 
                in the lab, I manufactured most of the components, including the piston wheel, piston housing, and piston post. I produced the 
                flywheel through sand casting and subsequently machined it to final dimensions. Finally, I assembled a fully functional Stirling 
                engine that operates at approximately 200 RPM.</p>
 
              
            </div>
          </div>
          <video class="project-video" controls>
            <source src="images/engine/engine.mp4" type="video/mp4">
            Your browser does not support the video tag.
          </video>
        `,
        },
        camel: {
          title: "Arcade Machine",
          image: "images/arcade/camel.jpg",
          details: `
          <div class="project-details-container">
            <div class="project-details-image">
              <img src="images/arcade/camel.jpg" alt="arcade machine">
            </div>
            <div class="project-details-text">
              <p> For this project, I was tasked with building a cultural-themed arcade machine that incorporates both interactive and 
                responsive elements. The design must include at least one sensor and one controller device, such as a button or joystick, 
                to enable user input. It must feature moving parts that respond to player actions, as well as lights and sounds that react 
                dynamically to user interaction to enhance engagement. Additionally, the system should be capable of automatically resetting 
                itself to be ready for the next user without manual intervention. The total budget for additional components is limited to $50, 
                excluding the parts already provided in the standard Arduino kit.</p>
            </div>
          </div>

          <hr style="display: block; height: 10px; background: limegreen; width: 80%; margin: 50px auto;">

          <div class="project-details-container reverse">
            <div class="project-details-image">
              <img src="images/arcade/electronics.jpg" alt="electronics">
            </div>
            <div class="project-details-text">
              <p> For my team's project, we designed a game similar to a skee ball machine. I designed the timing belt system with gears to 
                enable moving obstacles, along with the ramp, using SolidWorks. During assembly, I troubleshot wiring issues by consulting circuit 
                diagrams and conducting iterative test trials. I integrated breadboards, Arduino UNOs, and other electronics into the machine’s 
                structure, making necessary mechanical adjustments—such as attaching beam-breaker sensors to both sides of the return chute 
                for accurate score detection. Our arcade machine performed well during the final exhibit and was rated the second-most fun game 
                in the post-project survey.</p>
            </div>
          </div>
        `,
        },
      };

      // Project Lightbox Functionality
      function openProjectLightbox(projectId) {
        const project = projects[projectId];
        const lightboxContent = document.getElementById(
          "project-lightbox-content"
        );
        const caption = document.getElementById("caption");
        // Push a new history state to ensure back button works
        window.history.pushState(
          { page: projectId },
          project.title,
          `#${projectId}`
        );
        lightboxContent.innerHTML = `
      <h3>${project.title}</h3>
      ${project.details}
    `;
        caption.textContent = project.alt;
        document.getElementById("lightbox").style.display = "flex";
        document.body.style.overflow = "hidden";
        // Reset lightbox navigation state
        lightboxNavLinks.classList.remove("active");
      }

      // Function to go back to the previous page
      function goBack() {
        window.history.back();
      }

      // Update closeLightbox to include go back functionality
      function closeLightbox() {
        // Pause all videos in the lightbox content
        const videos = document.querySelectorAll(
          "#project-lightbox-content video"
        );
        videos.forEach((video) => video.pause());

        document.getElementById("lightbox").style.display = "none";
        document.body.style.overflow = "auto";
        // Add go back navigation
        goBack();
      }

      function navigateFromLightbox(sectionId) {
        // Pause all videos in the lightbox content
        const videos = document.querySelectorAll(
          "#project-lightbox-content video"
        );
        videos.forEach((video) => video.pause());

        document.getElementById("lightbox").style.display = "none";
        document.body.style.overflow = "auto";
        const section = document.getElementById(sectionId);
        section.scrollIntoView({ behavior: "smooth" });
      }

      // Handle popstate to close lightbox if back button is used
      window.addEventListener("popstate", () => {
        if (document.getElementById("lightbox").style.display === "flex") {
          closeLightbox();
        }
      });
    </script>
  </body>
</html>
